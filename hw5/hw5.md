# 第五次作业报告

董莫 027

## 任务

实现两种细分曲线的生成方法

- 逼近型细分：Chaiukin 方法（二次 B 样条），三次 B 样条细分方法
- 插值型细分：4 点细分方法

## 目的

学习使用细分方法生成曲线的原理和方法

## Deadline

2020 年 11 月 21 日晚

## 思路

本次作业要求实现三种曲线细分的算法，分别是Chaikin方法，三次B样条细分方法，以及4点细分方法。

- **Chaikin方法**：
  > 割角法，把控制曲线上每条边取其两个四等分点作为新的点，效果等同于把控制曲线上尖锐的角切除，再对新一轮点进行迭代直至收敛  
  > 对于边$v_i v_{i+1}$，两个新的顶点为$v_{2i}=\frac{3}{4}v_{i}+\frac{1}{4}v_{i+1}$，$v_{2i+1}=\frac{1}{4}v_{i}+\frac{3}{4}v_{i+1}$
- **三次B样条细分**：
  > 分为边点与角点  
  > 边点是上一轮顶点的中点  
  > 角点是上一轮顶点朝本轮相邻的两个边点方向移动  
  > 点$v_i$处的角点$v_{2i}=\frac{1}{8}v_{i-1}+\frac{3}{4}v_i+\frac{1}{8}v_{i+1}$  
  > 边$v_i v_{i+1}$上的边点$v_{2i+1}=\frac{1}{2}v_{i}+\frac{1}{2}v_{i+1}$  
- 以上两种逼近型细分，得到的极限曲线可能不经过控制顶点
- **4点插值细分**：
  > 每一轮迭代保留原来的顶点，在每条边上插入一个点，做细化，同时用相邻两方向的各两个点来估计新顶点距离原边的偏移  
  > 边$v_i v_{i+1}$上的新点$v_{2i+1} = \frac{v_i+v{i+1}}{2}+\alpha(\frac{v_i+v_{i+1}}{2}-\frac{v_{i-1}+v_{i+2}}{2})$
  > 边界点的处理：曲线不闭合时，我加入了两个虚构的点$v_{-1}=2v_0-v_1$，$v_n=2v_{n-1}-v{n-2}$，以此完成首末边的插值点估计

## 代码实现

- 本次作业我使用了c++编写，依赖GLFW3库
- 代码在windows（vs2019）和linux（gcc 10.2.0)编译通过。
- 操作方式可参见视频附件
  - 左键点击输入顶点，右键点击使曲线闭合
  - 勾选edit可进入编辑模式，此时可点击更改控制点的位置
  - 三种细分算法可选择
  - 拖动iterative time的滑条可改变迭代次数
  - 拖动interpolation para的滑条可改变4点插值算法的参数\alpha